<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API AFTT - Documentation</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèì</text></svg>">
    <style>
        :root {
            --bg: #0a0a0f;
            --bg-card: #12121a;
            --bg-code: #1a1a24;
            --text: #e4e4e7;
            --text-muted: #71717a;
            --accent: #8b5cf6;
            --accent-light: #a78bfa;
            --green: #22c55e;
            --blue: #3b82f6;
            --orange: #f97316;
            --red: #ef4444;
            --border: #27272a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        header {
            text-align: center;
            padding: 3rem 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 3rem;
        }
        
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        
        .subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }
        
        .base-url {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin: 1.5rem auto;
            display: inline-block;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.95rem;
        }
        
        .base-url a {
            color: var(--accent-light);
            text-decoration: none;
        }
        
        .links {
            margin-top: 1rem;
        }
        
        .links a {
            color: var(--accent);
            text-decoration: none;
            margin: 0 1rem;
        }
        
        .links a:hover {
            text-decoration: underline;
        }
        
        h2 {
            font-size: 1.8rem;
            margin: 3rem 0 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        h3 {
            font-size: 1.3rem;
            margin: 2rem 0 1rem;
            color: var(--accent-light);
        }
        
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        
        th {
            background: var(--bg-code);
            color: var(--accent-light);
            font-weight: 600;
        }
        
        tr:hover {
            background: var(--bg-code);
        }
        
        code {
            background: var(--bg-code);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            color: var(--accent-light);
        }
        
        pre {
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: var(--text);
        }
        
        .endpoint {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        
        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            background: var(--bg-code);
            border-bottom: 1px solid var(--border);
            cursor: pointer;
        }
        
        .endpoint-header:hover {
            background: #1f1f2a;
        }
        
        .method {
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.85rem;
            min-width: 60px;
            text-align: center;
        }
        
        .method.get { background: var(--green); color: #000; }
        .method.post { background: var(--blue); color: #fff; }
        .method.put { background: var(--orange); color: #000; }
        .method.delete { background: var(--red); color: #fff; }
        
        .endpoint-path {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 1rem;
            flex: 1;
        }
        
        .endpoint-desc {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .endpoint-body {
            padding: 1.5rem;
            display: none;
        }
        
        .endpoint.open .endpoint-body {
            display: block;
        }
        
        .endpoint.open .endpoint-header {
            border-bottom: 1px solid var(--accent);
        }
        
        .example-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
        }
        
        .card h4 {
            color: var(--accent-light);
            margin-bottom: 0.5rem;
        }
        
        .badge {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            margin: 0.2rem;
        }
        
        .badge.green { background: rgba(34, 197, 94, 0.2); color: var(--green); }
        .badge.blue { background: rgba(59, 130, 246, 0.2); color: var(--blue); }
        .badge.orange { background: rgba(249, 115, 22, 0.2); color: var(--orange); }
        .badge.purple { background: rgba(139, 92, 246, 0.2); color: var(--accent); }
        
        footer {
            text-align: center;
            padding: 3rem 0;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            margin-top: 3rem;
        }
        
        @media (max-width: 768px) {
            .container { padding: 1rem; }
            h1 { font-size: 1.8rem; }
            .endpoint-header { flex-wrap: wrap; }
            .endpoint-desc { width: 100%; margin-top: 0.5rem; }
        }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        corePlugins: {
            preflight: false,
        },
        theme: {
          extend: {
            colors: {
              border: "var(--border)",
              input: "var(--bg-card)",
              ring: "var(--accent)",
              background: "var(--bg)",
              foreground: "var(--text)",
              primary: {
                DEFAULT: "var(--accent)",
                foreground: "#ffffff",
              },
              secondary: {
                DEFAULT: "var(--bg-card)",
                foreground: "var(--text)",
              },
              destructive: {
                DEFAULT: "var(--red)",
                foreground: "#ffffff",
              },
              muted: {
                DEFAULT: "var(--bg-code)",
                foreground: "var(--text-muted)",
              },
              accent: {
                DEFAULT: "var(--accent-light)",
                foreground: "#ffffff",
              },
              card: {
                DEFAULT: "var(--bg-card)",
                foreground: "var(--text)",
              },
            },
            borderRadius: {
              lg: "8px",
              md: "6px",
              sm: "4px",
            },
          },
        },
      }
    </script>
    <style type="text/tailwindcss">
      @layer components {
        .btn {
          @apply inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 cursor-pointer;
        }
        .btn-primary {
          @apply bg-primary text-primary-foreground hover:bg-primary/90 border-0;
        }
        .btn-secondary {
          @apply bg-secondary text-secondary-foreground hover:bg-muted border border-border;
        }
        .btn-sm {
          @apply h-9 rounded-md px-3 text-xs;
        }
        
        /* Map copy-btn to shadcn style */
        .copy-btn {
            @apply btn btn-sm btn-primary absolute right-4 top-4 mt-0 float-none;
        }
      }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèì API AFTT</h1>
            <p class="subtitle">API REST pour les donn√©es du tennis de table belge</p>
            <div class="base-url">
                <a href="/" target="_blank">üì° URL de base</a> : 
                <span id="baseUrl"></span>
            </div>
            <div class="links">
                <a href="/docs" target="_blank">üìñ Swagger UI</a>
                <a href="/redoc" target="_blank">üìö ReDoc</a>
                <a href="/" target="_blank">üè† Interface Web</a>
            </div>
        </header>

        <!-- LEXIQUE -->
        <h2>üìñ Lexique des Codes</h2>
        
        <div class="grid">
            <div class="card">
                <h4>üó∫Ô∏è Codes Provinces</h4>
                <table>
                    <tr><td><code>H</code></td><td>Hainaut</td></tr>
                    <tr><td><code>Li</code></td><td>Li√®ge</td></tr>
                    <tr><td><code>N</code></td><td>Namur</td></tr>
                    <tr><td><code>Lu</code></td><td>Luxembourg</td></tr>
                    <tr><td><code>W</code></td><td>Brabant Wallon</td></tr>
                    <tr><td><code>A</code></td><td>Antwerpen</td></tr>
                    <tr><td><code>E</code></td><td>Oost-Vlaanderen</td></tr>
                    <tr><td><code>O</code></td><td>West-Vlaanderen</td></tr>
                    <tr><td><code>L</code></td><td>Limburg</td></tr>
                    <tr><td><code>V</code></td><td>Vlaams-Brabant</td></tr>
                    <tr><td><code>K</code></td><td>Brussels</td></tr>
                </table>
            </div>
            
            <div class="card">
                <h4>üèì Classements</h4>
                <p style="margin-bottom: 0.5rem; color: var(--text-muted);">Du plus bas au plus haut :</p>
                <div>
                    <span class="badge green">NC</span>
                    <span class="badge green">E6</span>
                    <span class="badge green">E4</span>
                    <span class="badge green">E2</span>
                    <span class="badge green">E0</span>
                    <span class="badge blue">D6</span>
                    <span class="badge blue">D4</span>
                    <span class="badge blue">D2</span>
                    <span class="badge blue">D0</span>
                    <span class="badge orange">C6</span>
                    <span class="badge orange">C4</span>
                    <span class="badge orange">C2</span>
                    <span class="badge orange">C0</span>
                    <span class="badge purple">B6</span>
                    <span class="badge purple">B4</span>
                    <span class="badge purple">B2</span>
                    <span class="badge purple">B0</span>
                    <span class="badge purple">A</span>
                </div>
            </div>
            
            <div class="card">
                <h4>üë§ Cat√©gories d'√¢ge</h4>
                <table>
                    <tr><td><code>PRE</code></td><td>Pr√©-minimes (-9 ans)</td></tr>
                    <tr><td><code>MIN</code></td><td>Minimes (9-10 ans)</td></tr>
                    <tr><td><code>CAD</code></td><td>Cadets (11-12 ans)</td></tr>
                    <tr><td><code>JUN</code></td><td>Juniors (13-14 ans)</td></tr>
                    <tr><td><code>SEN</code></td><td>Seniors (21-39 ans)</td></tr>
                    <tr><td><code>V40</code></td><td>V√©t√©rans 40+</td></tr>
                    <tr><td><code>V50</code></td><td>V√©t√©rans 50+</td></tr>
                    <tr><td><code>V60</code></td><td>V√©t√©rans 60+</td></tr>
                </table>
            </div>
            
            <div class="card">
                <h4>‚úÖ R√©sultats</h4>
                <table>
                    <tr><td><code>V</code></td><td>Victoire</td></tr>
                    <tr><td><code>D</code></td><td>D√©faite</td></tr>
                    <tr><td><code>WO</code></td><td>Walk-over (forfait)</td></tr>
                </table>
            </div>
        </div>

        <!-- ENDPOINTS -->
        <h2>üöÄ Endpoints</h2>

        <h3>üè• Health & Stats</h3>
        
        <div class="endpoint open">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/health</span>
                <span class="endpoint-desc">V√©rifier l'√©tat de l'API</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Exemple de requ√™te :</span>
                <pre><code>GET /health</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{ "status": "ok" }</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/stats</span>
                <span class="endpoint-desc">Statistiques de la base de donn√©es</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Exemple de requ√™te :</span>
                <pre><code>GET /api/stats</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "clubs": 823,
  "players": 45210,
  "matches": 156420,
  "players_with_matches": 12500
}</code></pre>
            </div>
        </div>

        <h3>üè¢ Clubs</h3>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/clubs</span>
                <span class="endpoint-desc">Liste des clubs</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Param√®tres :</span>
                <table>
                    <tr><th>Param</th><th>Type</th><th>Description</th></tr>
                    <tr><td><code>province</code></td><td>string</td><td>Filtrer par province (ex: Hainaut)</td></tr>
                    <tr><td><code>limit</code></td><td>int</td><td>Nombre max de r√©sultats</td></tr>
                    <tr><td><code>offset</code></td><td>int</td><td>Pagination</td></tr>
                </table>
                <span class="example-label">Exemples :</span>
                <pre><code>GET /api/clubs
GET /api/clubs?province=Hainaut
GET /api/clubs?limit=50&offset=0</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "count": 156,
  "clubs": [
    { "code": "H004", "name": "ETT MANAGE", "province": "Hainaut" },
    { "code": "H005", "name": "CTT GODARVILLE", "province": "Hainaut" }
  ]
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/clubs/provinces</span>
                <span class="endpoint-desc">Liste des provinces</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/clubs/provinces</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "provinces": ["Antwerpen", "Brabant Wallon", "Hainaut", "Li√®ge", "Limburg", ...]
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/clubs/{code}</span>
                <span class="endpoint-desc">D√©tail d'un club</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/clubs/H004</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "code": "H004",
  "name": "ETT MANAGE",
  "province": "Hainaut",
  "address": "Rue de la Salle 12",
  "city": "Manage"
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/clubs/{code}/players</span>
                <span class="endpoint-desc">Joueurs d'un club</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/clubs/H004/players</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "club": { "code": "H004", "name": "ETT MANAGE" },
  "count": 52,
  "players": [
    {
      "licence": "176506",
      "name": "DEBESSEL CHRISTOPHER",
      "ranking": "C2",
      "points_current": 1285,
      "category": "SEN"
    }
  ]
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method post">POST</span>
                <span class="endpoint-path">/api/clubs/{code}/scrape</span>
                <span class="endpoint-desc">Scraper un club (rafra√Æchir les donn√©es)</span>
            </div>
            <div class="endpoint-body">
                <pre><code>POST /api/clubs/H004/scrape</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "success": true,
  "club_code": "H004",
  "total_players": 52,
  "players_scraped": 52,
  "message": "Scraping termin√©: 52 joueurs, 52 fiches"
}</code></pre>
                <p style="color: var(--orange); margin-top: 1rem;">‚ö†Ô∏è Cette requ√™te peut prendre 30-60 secondes</p>
            </div>
        </div>

        <h3>üë§ Joueurs</h3>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/players</span>
                <span class="endpoint-desc">Liste des joueurs avec filtres</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Param√®tres :</span>
                <table>
                    <tr><th>Param</th><th>Type</th><th>Description</th></tr>
                    <tr><td><code>club_code</code></td><td>string</td><td>Filtrer par club (ex: H004)</td></tr>
                    <tr><td><code>ranking</code></td><td>string</td><td>Filtrer par classement (ex: B2)</td></tr>
                    <tr><td><code>min_points</code></td><td>float</td><td>Points minimum</td></tr>
                    <tr><td><code>max_points</code></td><td>float</td><td>Points maximum</td></tr>
                    <tr><td><code>search</code></td><td>string</td><td>Recherche par nom/licence</td></tr>
                    <tr><td><code>limit</code></td><td>int</td><td>Max r√©sultats (1-1000)</td></tr>
                </table>
                <span class="example-label">Exemples :</span>
                <pre><code>GET /api/players?club_code=H004
GET /api/players?ranking=B2
GET /api/players?min_points=1000&max_points=1500
GET /api/players?search=DEBESSEL</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/players/{licence}</span>
                <span class="endpoint-desc">Fiche compl√®te d'un joueur</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/players/176506</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "licence": "176506",
  "name": "DEBESSEL CHRISTOPHER",
  "club_code": "H004",
  "ranking": "C2",
  "points_start": 1200,
  "points_current": 1285,
  "total_wins": 25,
  "total_losses": 12,
  "stats_masculine": [
    { "opponent_ranking": "C4", "wins": 8, "losses": 2 }
  ],
  "matches_masculine": [
    {
      "date": "2024-12-10",
      "opponent_name": "MARTIN PIERRE",
      "opponent_ranking": "C4",
      "result": "V",
      "score": "3-1"
    }
  ]
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/players/{licence}/matches</span>
                <span class="endpoint-desc">Matchs d'un joueur</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Param√®tres :</span>
                <table>
                    <tr><th>Param</th><th>Description</th></tr>
                    <tr><td><code>fiche_type</code></td><td>"masculine" ou "feminine"</td></tr>
                    <tr><td><code>opponent</code></td><td>Licence de l'adversaire</td></tr>
                </table>
                <pre><code>GET /api/players/176506/matches
GET /api/players/176506/matches?fiche_type=masculine
GET /api/players/176506/matches?opponent=152478</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/players/{licence1}/vs/{licence2}</span>
                <span class="endpoint-desc">Confrontation entre deux joueurs</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/players/176506/vs/152478</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "player1": { "licence": "176506", "name": "DEBESSEL CHRISTOPHER" },
  "player2": { "licence": "152478", "name": "MARTIN PIERRE" },
  "player1_wins": 5,
  "player2_wins": 2,
  "matches": [...]
}</code></pre>
            </div>
        </div>

        <h3>üèÜ Rankings</h3>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/rankings/top</span>
                <span class="endpoint-desc">Classement des meilleurs joueurs</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Param√®tres :</span>
                <table>
                    <tr><th>Param</th><th>Description</th></tr>
                    <tr><td><code>limit</code></td><td>Nombre de joueurs (1-500)</td></tr>
                    <tr><td><code>province</code></td><td>Filtrer par province</td></tr>
                    <tr><td><code>club_code</code></td><td>Filtrer par club</td></tr>
                    <tr><td><code>ranking</code></td><td>Filtrer par classement</td></tr>
                </table>
                <pre><code>GET /api/rankings/top?limit=100
GET /api/rankings/top?province=Hainaut&limit=50
GET /api/rankings/top?club_code=H004</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/rankings/progressions</span>
                <span class="endpoint-desc">Meilleures progressions de la saison</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/rankings/progressions?limit=50</code></pre>
            </div>
        </div>

        <h3>üèÖ Interclubs</h3>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/interclubs/divisions</span>
                <span class="endpoint-desc">Liste des divisions interclubs</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Parametres :</span>
                <table>
                    <tr><th>Param</th><th>Type</th><th>Description</th></tr>
                    <tr><td><code>category</code></td><td>string</td><td>Filtrer par categorie (ex: National, Prov. Hainaut)</td></tr>
                    <tr><td><code>gender</code></td><td>string</td><td>Filtrer par genre (Hommes, Dames)</td></tr>
                </table>
                <span class="example-label">Exemples :</span>
                <pre><code>GET /api/interclubs/divisions
GET /api/interclubs/divisions?category=National
GET /api/interclubs/divisions?gender=Hommes</code></pre>
                <span class="example-label">Reponse :</span>
                <pre><code>{
  "count": 400,
  "divisions": [
    {
      "division_index": 1,
      "division_name": "Division 1 - National - Hommes",
      "division_category": "National",
      "division_gender": "Hommes"
    }
  ]
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/interclubs/rankings</span>
                <span class="endpoint-desc">Classement d'une division pour une semaine</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Parametres (obligatoires) :</span>
                <table>
                    <tr><th>Param</th><th>Type</th><th>Description</th></tr>
                    <tr><td><code>division_index</code></td><td>int</td><td>Index de la division</td></tr>
                    <tr><td><code>week</code></td><td>int</td><td>Numero de semaine (1-22)</td></tr>
                </table>
                <span class="example-label">Exemple :</span>
                <pre><code>GET /api/interclubs/rankings?division_index=5&week=10</code></pre>
                <span class="example-label">Reponse :</span>
                <pre><code>{
  "division_index": 5,
  "week": 10,
  "count": 12,
  "rankings": [
    {
      "rank": 1,
      "team_name": "ETT Manage A",
      "played": 10,
      "wins": 8,
      "losses": 1,
      "draws": 1,
      "forfeits": 0,
      "points": 17
    }
  ]
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/interclubs/team/{team_name}/history</span>
                <span class="endpoint-desc">Progression d'une equipe semaine par semaine</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Parametres :</span>
                <table>
                    <tr><th>Param</th><th>Type</th><th>Description</th></tr>
                    <tr><td><code>division_index</code></td><td>int</td><td>Filtrer par division (optionnel)</td></tr>
                </table>
                <span class="example-label">Exemple :</span>
                <pre><code>GET /api/interclubs/team/ETT%20Manage%20A/history
GET /api/interclubs/team/ETT%20Manage%20A/history?division_index=5</code></pre>
                <span class="example-label">Reponse :</span>
                <pre><code>{
  "team_name": "ETT Manage A",
  "count": 22,
  "history": [
    { "week": 1, "rank": 3, "played": 1, "wins": 1, "losses": 0, "draws": 0, "points": 2 },
    { "week": 2, "rank": 2, "played": 2, "wins": 2, "losses": 0, "draws": 0, "points": 4 }
  ]
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/interclubs/search</span>
                <span class="endpoint-desc">Recherche d'equipes interclubs</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Parametres :</span>
                <table>
                    <tr><th>Param</th><th>Type</th><th>Description</th></tr>
                    <tr><td><code>q</code></td><td>string</td><td>Terme de recherche (min 2 caracteres)</td></tr>
                    <tr><td><code>limit</code></td><td>int</td><td>Max resultats (1-200, defaut: 50)</td></tr>
                </table>
                <pre><code>GET /api/interclubs/search?q=Manage
GET /api/interclubs/search?q=CTT&limit=20</code></pre>
                <span class="example-label">Reponse :</span>
                <pre><code>{
  "query": "Manage",
  "count": 3,
  "teams": [
    { "team_name": "ETT Manage A", "division_index": 5, "division_name": "Division 2A - Prov. Hainaut - Hommes" },
    { "team_name": "ETT Manage B", "division_index": 42, "division_name": "Division 3C - Prov. Hainaut - Hommes" }
  ]
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/interclubs/stats</span>
                <span class="endpoint-desc">Statistiques interclubs</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/interclubs/stats</code></pre>
                <span class="example-label">Reponse :</span>
                <pre><code>{
  "divisions_count": 400,
  "rankings_count": 52000,
  "teams_count": 3200,
  "min_week": 1,
  "max_week": 22
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method post">POST</span>
                <span class="endpoint-path">/api/scrape/interclubs</span>
                <span class="endpoint-desc">Lancer le scraping des classements interclubs</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Parametres (optionnels) :</span>
                <table>
                    <tr><th>Param</th><th>Type</th><th>Description</th></tr>
                    <tr><td><code>weeks</code></td><td>string</td><td>Semaines (ex: "1,2,3" ou "1-5"). Defaut: 1-22</td></tr>
                    <tr><td><code>divisions</code></td><td>string</td><td>Indices de divisions (ex: "1,5,10"). Defaut: toutes</td></tr>
                    <tr><td><code>resume_division</code></td><td>int</td><td>Reprendre depuis cette division</td></tr>
                    <tr><td><code>resume_week</code></td><td>int</td><td>Reprendre depuis cette semaine</td></tr>
                </table>
                <span class="example-label">Exemples :</span>
                <pre><code># Scrape complet (~8800 pages, 1.5-3h)
POST /api/scrape/interclubs

# Test rapide (1 division, semaine 1)
POST /api/scrape/interclubs?weeks=1&divisions=5

# Scrape semaines 1-5 pour toutes les divisions
POST /api/scrape/interclubs?weeks=1-5

# Reprendre apres interruption
POST /api/scrape/interclubs?resume_division=42&resume_week=3</code></pre>
                <span class="example-label">Reponse :</span>
                <pre><code>{
  "status": "started",
  "task_id": "interclubs_20260210_030000",
  "weeks": [1, 2, 3, ...],
  "divisions": "all",
  "message": "Scraping interclubs demarre en arriere-plan"
}</code></pre>
                <p style="color: var(--orange); margin-top: 1rem;">‚ö†Ô∏è Le scrape complet prend 1.5 a 3 heures (~8800 pages)</p>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/scrape/interclubs/status</span>
                <span class="endpoint-desc">Statut du scraping interclubs en cours</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/scrape/interclubs/status</code></pre>
                <span class="example-label">Reponse :</span>
                <pre><code>{
  "running": true,
  "task_id": "interclubs_20260210_030000",
  "status": "running",
  "elapsed_seconds": 1234.5,
  "total_rankings": 15000,
  "errors_count": 2,
  "last_success": { "division_index": 42, "week": 5 }
}</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/scrape/interclubs/logs/{task_id}</span>
                <span class="endpoint-desc">Logs temps reel du scraping interclubs</span>
            </div>
            <div class="endpoint-body">
                <pre><code>GET /api/scrape/interclubs/logs/interclubs_20260210_030000</code></pre>
            </div>
        </div>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method post">POST</span>
                <span class="endpoint-path">/api/scrape/interclubs/cancel</span>
                <span class="endpoint-desc">Annuler le scraping interclubs en cours</span>
            </div>
            <div class="endpoint-body">
                <pre><code>POST /api/scrape/interclubs/cancel</code></pre>
                <span class="example-label">Reponse :</span>
                <pre><code>{
  "status": "cancelled",
  "task_id": "interclubs_20260210_030000",
  "message": "Scraping interclubs annule"
}</code></pre>
            </div>
        </div>

        <h3>üîç Recherche</h3>

        <div class="endpoint">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/search</span>
                <span class="endpoint-desc">Recherche de joueurs</span>
            </div>
            <div class="endpoint-body">
                <span class="example-label">Param√®tres :</span>
                <table>
                    <tr><th>Param</th><th>Description</th></tr>
                    <tr><td><code>q</code></td><td>Terme de recherche (min 2 caract√®res)</td></tr>
                    <tr><td><code>limit</code></td><td>Max r√©sultats (1-200)</td></tr>
                </table>
                <pre><code>GET /api/search?q=DEBESSEL
GET /api/search?q=176506
GET /api/search?q=DEB&limit=20</code></pre>
                <span class="example-label">R√©ponse :</span>
                <pre><code>{
  "query": "DEBESSEL",
  "count": 2,
  "players": [
    { "licence": "176506", "name": "DEBESSEL CHRISTOPHER", "ranking": "C2" }
  ]
}</code></pre>
            </div>
        </div>

        <!-- CODE EXAMPLES -->
        <h2>üíª Exemples de Code</h2>

        <div class="section">
            <h4>JavaScript (Fetch)</h4>
            <pre><code>const API = window.location.origin;

// Stats
const stats = await fetch(`${API}/api/stats`).then(r => r.json());

// Clubs du Hainaut
const clubs = await fetch(`${API}/api/clubs?province=Hainaut`).then(r => r.json());

// Joueurs d'un club
const players = await fetch(`${API}/api/clubs/H004/players`).then(r => r.json());

// Recherche
const results = await fetch(`${API}/api/search?q=DEBESSEL`).then(r => r.json());

// Fiche joueur
const player = await fetch(`${API}/api/players/176506`).then(r => r.json());</code></pre>
        </div>

        <div class="section">
            <h4>Python</h4>
            <pre><code>import requests

API = 'https://lkkkwcg88c04c4g8kgw884ko.chris-ia.com'

# Stats
stats = requests.get(f'{API}/api/stats').json()

# Clubs du Hainaut
clubs = requests.get(f'{API}/api/clubs', params={'province': 'Hainaut'}).json()

# Joueurs d'un club
players = requests.get(f'{API}/api/clubs/H004/players').json()

# Recherche
results = requests.get(f'{API}/api/search', params={'q': 'DEBESSEL'}).json()</code></pre>
        </div>

        <div class="section">
            <h4>cURL</h4>
            <pre><code># Stats
curl https://lkkkwcg88c04c4g8kgw884ko.chris-ia.com/api/stats

# Clubs du Hainaut
curl "https://lkkkwcg88c04c4g8kgw884ko.chris-ia.com/api/clubs?province=Hainaut"

# Scraper un club (POST)
curl -X POST https://lkkkwcg88c04c4g8kgw884ko.chris-ia.com/api/clubs/H004/scrape</code></pre>
        </div>

        <footer>
            <p>üèì API AFTT - Donn√©es du tennis de table belge</p>
            <p style="margin-top: 0.5rem;">
                <a href="https://github.com/cltconcept/aftt-scraper" target="_blank" style="color: var(--accent);">GitHub</a>
            </p>
        </footer>
    </div>

    <script>
        // Set base URL
        document.getElementById('baseUrl').textContent = window.location.origin;
        
        // Toggle endpoint details
        function toggleEndpoint(header) {
            const endpoint = header.parentElement;
            endpoint.classList.toggle('open');
        }
    </script>
</body>
</html>
